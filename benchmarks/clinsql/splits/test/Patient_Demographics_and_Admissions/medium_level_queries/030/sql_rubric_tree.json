{
  "id": "sql-query-evaluation-root",
  "requirements": "SQL Query Evaluation",
  "sequential": false,
  "sub_tasks": [
    {
      "id": "patient-cohort-construction",
      "requirements": "Patient Cohort Construction",
      "weight": 3,
      "sequential": false,
      "sub_tasks": [
        {
          "id": "gender-selection",
          "requirements": "Gender Selection: The query must filter for female patients using p.gender = 'F'.",
          "sequential": false,
          "critical": true,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "age-range-selection",
          "requirements": "Age Range Selection: The query must filter patients aged between 44 and 54 using p.anchor_age BETWEEN 44 AND 54.",
          "sequential": false,
          "critical": true,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "admission-type-selection",
          "requirements": "Admission Type Selection: The query must filter for elective admissions using a.admission_type = 'ELECTIVE'.",
          "sequential": false,
          "critical": true,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "los-pre-filter",
          "requirements": "Length of Stay Pre-filter: The query should filter out admissions where LOS is zero or less, using DATETIME_DIFF(a.dischtime, a.admittime, DAY) > 0.",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        }
      ]
    },
    {
      "id": "database-integration",
      "requirements": "Database Integration",
      "weight": 3,
      "sequential": false,
      "sub_tasks": [
        {
          "id": "table-join-logic",
          "requirements": "Table Join Logic: The query must join the 'patients' and 'admissions' tables to link demographics with admission details.",
          "sequential": false,
          "critical": true,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "key-matching",
          "requirements": "Key Matching: The join between 'patients' and 'admissions' tables must correctly use 'subject_id' as the key.",
          "sequential": false,
          "critical": true,
          "scoring": "1/0",
          "sub_tasks": []
        }
      ]
    },
    {
      "id": "clinical-analytics",
      "requirements": "Clinical Analytics",
      "weight": 2,
      "sequential": true,
      "sub_tasks": [
        {
          "id": "los-calculation",
          "requirements": "Length of Stay Calculation: The query must correctly calculate the length of stay in days using DATETIME_DIFF(a.dischtime, a.admittime, DAY).",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "outcome-stratification",
          "requirements": "Outcome Stratification: The query must create a new column to stratify outcomes based on 'hospital_expire_flag', distinguishing between 'Discharged Alive' and 'In-Hospital Mortality'.",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "grouping-logic",
          "requirements": "Grouping Logic: The final aggregation must be grouped by the derived 'outcome' column to stratify results.",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "statistical-aggregations",
          "requirements": "Statistical Aggregations: The query must correctly compute the count (n), mean, and specified percentiles (25th, 50th, 75th, 90th) for the length of stay.",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        }
      ]
    },
    {
      "id": "output-formatting",
      "requirements": "Output Formatting",
      "weight": 1,
      "sequential": false,
      "sub_tasks": [
        {
          "id": "rounding-values",
          "requirements": "Rounding Values: The query should round the mean length of stay to a reasonable number of decimal places (e.g., 2).",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        },
        {
          "id": "column-aliasing",
          "requirements": "Column Aliasing: The query should use clear and descriptive aliases for all output columns.",
          "sequential": false,
          "critical": false,
          "scoring": "1/0",
          "sub_tasks": []
        }
      ]
    }
  ]
}
